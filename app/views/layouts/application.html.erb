<!DOCTYPE html>
<html>
<head>
  <title>BurningAirlines</title>
  <%= stylesheet_link_tag    'application', media: 'all'%>
  <%= javascript_include_tag 'application' %>
  <%= csrf_meta_tags %>
</head>
<body>

<!-- FOR DEV ONLY TO BE DELETED -->
<div class="nav">
  <ul>
    <li><a href="/airplanes">Airplanes</a></li>
    <li><a href="/flights">Flights</a></li>
  </ul>
</div>

<!-- DEVISE SIGNIN -->
<p class="navbar-text pull-right">
<% if user_signed_in? %>
  Logged in as <strong><%= current_user.email %></strong>.
  <%= link_to 'Edit profile', edit_user_registration_path, :class => 'navbar-link' %> |
  <%= link_to "Logout", destroy_user_session_path, method: :delete, :class => 'navbar-link'  %>
<% else %>
  <%= link_to "Sign up", new_user_registration_path, :class => 'navbar-link'  %> |
  <%= link_to "Login", new_user_session_path, :class => 'navbar-link'  %>
<% end %>

<!-- DEVISE NOTIFICATIONS -->
<% if notice %>
  <p class="alert alert-success"><%= notice %></p>
<% end %>
<% if alert %>
  <p class="alert alert-danger"><%= alert %></p>
<% end %>

<%= yield %>

<!-- TEMPLATE FOR FLIGHT SEARCH -->
<script>  
  <table>
    <thead>
      <tr>
        <th>Flight number</th>
        <th>Origin</th>
        <th>Destination</th>
        <th>Date</th>
        <th>Plane</th>
        <th>Seats Available</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% Flight.pluck(:origin).each do |flight| %>
        <tr>
          <td><%= flight.flight_number %></td>
          <td><%= flight.origin %></td>
          <td><%= flight.destination %></td>
          <td><%= flight.date %></td>
          <td><%= flight.airplane.name %></td>
          <!-- UPDATE TO INC ROW*AISLE - TOTAL AVAIL -->
          <td><%= flight.airplane.rows*flight.airplane.aisles %></td>
          <td><%= link_to 'Show', flight %></td>
          <td><%= link_to 'Edit', edit_flight_path(flight) %></td>
          <td><%= link_to 'Destroy', flight, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</script>


</body>
</html>
